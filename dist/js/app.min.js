"use strict";$(function(){$(function(){new n,$(".menu").each(function(){new e($(this))}),$(".news").each(function(){new t($(this))})});var t=function(t){var e=t,n=e.find(".news__item"),o=function(){n.each(function(){var t=$(this),e=t.find("img"),n=t.find(".news__item-wrap");n.prepend(e.clone())})},i=function(){o()};i()},e=function(t){var e=t,n=$(".menu-btn"),o=$(".site"),i=e.find(".menu__wrap"),s="blur",a=function(){e.on({click:function(){e.removeClass("open"),o.removeClass(s)}}),n.on({click:function(){e.addClass("open"),o.addClass(s)}}),i.on({click:function(t){var t=t||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}})},c=function(){var t=window.navigator.userAgent.toLowerCase(),e=/trident/gi.test(t)||/msie/gi.test(t)||/edge/gi.test(t);e&&(s="light")},u=function(){a(),c(),i.mCustomScrollbar()};u()},n=function(t){var e=$(".site__title"),n=$(".spinner"),o=$("body"),i=function(){$(window).on({load:function(){setTimeout(function(){n.addClass("hide"),setTimeout(function(){n.remove()},500)},1e3)},resize:function(){o.mCustomScrollbar("update")}})},s=function(){var t=$(".collection").offset().top,e=$(".collection").height(),n=$(".must-have").offset().top,i=$(".must-have").height(),s=$(".must-have__bg").eq(0).offset().top,a=$(".must-have__bg").eq(0).height(),u=$(".must-have__bg").eq(1).offset().top,l=$(".must-have__bg").eq(1).height(),r=$(".most-wanted").offset().top,f=$(".most-wanted").height(),h=$(".sale").offset().top,_=$(".sale").height(),d=$(".site__header").offset().top,m=$(".site__header").height(),p=$(window).height();o.mCustomScrollbar({keyboard:!0,callbacks:{whileScrolling:function(){var o=parseInt(-1*this.mcs.top);t+e>=o&&p+o>=t&&(c($(".collection .site__title"),0,o,.3*e/(e+p)),c($(".collection__pic"),0,o,.15*e/(e+p)),c($(".collection__wrap"),o,0,.05*e/(e+p))),n+i>=o&&p+o>=n&&c($(".must-have .site__title"),0,o-(n-p),.3*i/(i+p)),s+a>=o&&p+o>=s&&c($(".must-have__bg").eq(0),0,o-(s-p),a*-.2/(a+p)),u+l>=o&&p+o>=u&&c($(".must-have__bg").eq(1),0,o-(n-p),.2*l/(l+p)),r+f>=o&&p+o>=r&&c($(".most-wanted .site__title"),0,o-(r-p),.3*f/(f+p)),h+_>=o&&p+o>=h&&(c($(".sale .site__title"),0,o-(h-p),.3*_/(_+p)),c($(".sale__bg"),0,o-(h-p),.4*_/(_+p))),d+m>=o&&p+o>=d&&c($(".site__header-bg"),0,o,.5*m/(m+p))}}})},a=function(t){var e=t.text().replace(/\s/g,""),n=e.split(""),o=n.length;t.text("");for(var i=0;o>i;i++)t.append("<span>"+n[i]+"</span>")},c=function(t,e,n,o){var i="translate3d("+Math.round(e*o)+"px, "+Math.round(n*o)+"px, 0px )";t.css({transform:i})},u=function(){i(),s(),e.each(function(){a($(this))})};u()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiUGFnZSIsImVhY2giLCJNZW51IiwidGhpcyIsIk5ld3MiLCJvYmoiLCJfb2JqIiwiX2l0ZW0iLCJmaW5kIiwiX2NyZWF0ZSIsImN1ckVsZW0iLCJjdXJQaWMiLCJ3cmFwRWxlbSIsInByZXBlbmQiLCJjbG9uZSIsIl9pbml0IiwiX2J0biIsIl9zaXRlIiwiX3dyYXAiLCJfY2xhc3NOYW1lIiwiX2FkZEV2ZW50cyIsIm9uIiwiY2xpY2siLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZXZlbnQiLCJ3aW5kb3ciLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJfZGV0ZWN0QnJvd3NlciIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc19pZSIsInRlc3QiLCJtQ3VzdG9tU2Nyb2xsYmFyIiwiX3NpdGVUaXRsZSIsIl9zcGlubmVyIiwiX2JvZHkiLCJsb2FkIiwic2V0VGltZW91dCIsInJlbW92ZSIsInJlc2l6ZSIsIl9hZGRDdXN0b21TY3JvbGwiLCJjb2xsZWN0aW9uVG9wIiwib2Zmc2V0IiwidG9wIiwiY29sbGVjdGlvbkhlaWdodCIsImhlaWdodCIsIm11c3RIYXZlVG9wIiwibXVzdEhhdmVIZWlnaHQiLCJtdXN0SGF2ZUJnMVRvcCIsImVxIiwibXVzdEhhdmVCZzFIZWlnaHQiLCJtdXN0SGF2ZUJnMlRvcCIsIm11c3RIYXZlQmcySGVpZ2h0IiwibW9zdFdhbnRlZFRvcCIsIm1vc3RXYW50ZWRIZWlnaHQiLCJzYWxlVG9wIiwic2FsZUhlaWdodCIsImhlYWRlclRvcCIsImhlYWRlckhlaWdodCIsIndpbkhlaWdodCIsImtleWJvYXJkIiwiY2FsbGJhY2tzIiwid2hpbGVTY3JvbGxpbmciLCJzY3JvbGxQb3NpdGlvbiIsInBhcnNlSW50IiwibWNzIiwiX3BhcmFsYXgiLCJfY3JlYXRlVGl0bGUiLCJlbGVtIiwibGluZSIsInRleHQiLCJyZXBsYWNlIiwiYXJyIiwic3BsaXQiLCJhcnJMZW5ndGgiLCJsZW5ndGgiLCJpIiwiYXBwZW5kIiwieCIsInkiLCJrb2VmIiwidHJhbnNsYXRlIiwiTWF0aCIsInJvdW5kIiwiY3NzIiwidHJhbnNmb3JtIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFBQSxHQUFFLFdBR0VBLEVBQUUsV0FFRSxHQUFJQyxHQUVKRCxFQUFFLFNBQVNFLEtBQU0sV0FDYixHQUFJQyxHQUFNSCxFQUFFSSxTQUdoQkosRUFBRSxTQUFTRSxLQUFNLFdBQ2IsR0FBSUcsR0FBTUwsRUFBRUksVUFLcEIsSUFBSUMsR0FBTyxTQUFTQyxHQUdoQixHQUFJQyxHQUFPRCxFQUNQRSxFQUFRRCxFQUFLRSxLQUFNLGVBR25CQyxFQUFVLFdBRU5GLEVBQU1OLEtBQU0sV0FDUixHQUFJUyxHQUFVWCxFQUFHSSxNQUNiUSxFQUFTRCxFQUFRRixLQUFNLE9BQ3ZCSSxFQUFXRixFQUFRRixLQUFNLG1CQUU3QkksR0FBU0MsUUFBUUYsRUFBT0csWUFJaENDLEVBQVEsV0FDSk4sSUFPUk0sTUFHQWIsRUFBTyxTQUFVRyxHQUdqQixHQUFJQyxHQUFPRCxFQUNQVyxFQUFPakIsRUFBRyxhQUNWa0IsRUFBUWxCLEVBQUcsU0FDWG1CLEVBQVFaLEVBQUtFLEtBQU0sZUFDbkJXLEVBQWEsT0FHYkMsRUFBYSxXQUNUZCxFQUFLZSxJQUNEQyxNQUFPLFdBQ0hoQixFQUFLaUIsWUFBYSxRQUNsQk4sRUFBTU0sWUFBYUosTUFJM0JILEVBQUtLLElBQ0RDLE1BQU8sV0FDSGhCLEVBQUtrQixTQUFVLFFBQ2ZQLEVBQU1PLFNBQVVMLE1BSXhCRCxFQUFNRyxJQUNGQyxNQUFPLFNBQVVHLEdBQ2IsR0FBSUEsR0FBUUEsR0FBU0MsT0FBT0QsS0FFdkJBLEdBQU1FLGdCQUNQRixFQUFNRSxrQkFFTkYsRUFBTUcsY0FBZSxNQU1yQ0MsRUFBaUIsV0FDYixHQUFJQyxHQUFLSixPQUFPSyxVQUFVQyxVQUFVQyxjQUNoQ0MsRUFBUyxZQUFhQyxLQUFLTCxJQUFRLFNBQVVLLEtBQUtMLElBQVEsU0FBVUss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QWhDSyxHQUFzREosRUFBWUksR0FBb0JOLEdBQ3pGUyxFQUFVdkUsRUFBRSxvQkFBcUIsRUFBR29FLEVBQTZCLEdBQWJMLEdBQWtCQSxFQUFlQyxTQU96R1EsRUFBZSxTQUFVQyxHQUNyQixHQUFJQyxHQUFPRCxFQUFLRSxPQUFPQyxRQUFRLE1BQU8sSUFDbENDLEVBQU1ILEVBQUtJLE1BQU0sSUFDakJDLEVBQVlGLEVBQUlHLE1BRXBCUCxHQUFLRSxLQUFLLEdBRVYsS0FBTSxHQUFJTSxHQUFJLEVBQU9GLEVBQUpFLEVBQWVBLElBQzVCUixFQUFLUyxPQUFPLFNBQVdMLEVBQUlJLEdBQUssWUFHeENWLEVBQVcsU0FBVUUsRUFBTVUsRUFBR0MsRUFBR0MsR0FDN0IsR0FBSUMsR0FBWSxlQUFpQkMsS0FBS0MsTUFBTUwsRUFBRUUsR0FBUSxPQUFTRSxLQUFLQyxNQUFNSixFQUFFQyxHQUFRLFdBRXBGWixHQUFLZ0IsS0FDREMsVUFBYUosS0FHckJ0RSxFQUFRLFdBQ0pLLElBQ0F3QixJQUVBUCxFQUFXcEMsS0FBTSxXQUNic0UsRUFBY3hFLEVBQUVJLFNBUTVCWSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgICQoZnVuY3Rpb24oKXtcblxuICAgICAgICBuZXcgUGFnZSgpO1xuXG4gICAgICAgICQoJy5tZW51JykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLm5ld3MnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBOZXdzKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgIH0pO1xuXG4gICAgdmFyIE5ld3MgPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtID0gX29iai5maW5kKCAnLm5ld3NfX2l0ZW0nICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jcmVhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGljID0gY3VyRWxlbS5maW5kKCAnaW1nJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwRWxlbSA9IGN1ckVsZW0uZmluZCggJy5uZXdzX19pdGVtLXdyYXAnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgd3JhcEVsZW0ucHJlcGVuZChjdXJQaWMuY2xvbmUoKSk7XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfY3JlYXRlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0biA9ICQoICcubWVudS1idG4nICksXG4gICAgICAgICAgICBfc2l0ZSA9ICQoICcuc2l0ZScgKSxcbiAgICAgICAgICAgIF93cmFwID0gX29iai5maW5kKCAnLm1lbnVfX3dyYXAnKSxcbiAgICAgICAgICAgIF9jbGFzc05hbWUgPSAnYmx1cic7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLnJlbW92ZUNsYXNzKCBfY2xhc3NOYW1lICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfYnRuLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdvcGVuJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NpdGUuYWRkQ2xhc3MoIF9jbGFzc05hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZXZlbnQuc3RvcFByb3BhZ2F0aW9uICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZGV0ZWN0QnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICBpc19pZSA9ICgvdHJpZGVudC9naSkudGVzdCh1YSkgfHwgKC9tc2llL2dpKS50ZXN0KHVhKSB8fCAoL2VkZ2UvZ2kpLnRlc3QodWEpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzX2llKSB7XG4gICAgICAgICAgICAgICAgICAgIF9jbGFzc05hbWUgPSAnbGlnaHQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2RldGVjdEJyb3dzZXIoKTtcbiAgICAgICAgICAgICAgICBfd3JhcC5tQ3VzdG9tU2Nyb2xsYmFyKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBQYWdlID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9zaXRlVGl0bGUgPSAkKCAnLnNpdGVfX3RpdGxlJyksXG4gICAgICAgICAgICBfc3Bpbm5lciA9ICQoICcuc3Bpbm5lcicpLFxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQod2luZG93KS5vbigge1xuICAgICAgICAgICAgICAgICAgICAnbG9hZCc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NwaW5uZXIuYWRkQ2xhc3MoICdoaWRlJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3NwaW5uZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAncmVzaXplJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYm9keS5tQ3VzdG9tU2Nyb2xsYmFyKCAndXBkYXRlJyApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRDdXN0b21TY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvblRvcCA9ICQoJy5jb2xsZWN0aW9uJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSGVpZ2h0ID0gJCgnLmNvbGxlY3Rpb24nKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVUb3AgPSAkKCcubXVzdC1oYXZlJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUhlaWdodCA9ICQoJy5tdXN0LWhhdmUnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVCZzFUb3AgPSAkKCcubXVzdC1oYXZlX19iZycpLmVxKDApLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVCZzFIZWlnaHQgPSAkKCcubXVzdC1oYXZlX19iZycpLmVxKDApLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUJnMlRvcCA9ICQoJy5tdXN0LWhhdmVfX2JnJykuZXEoMSkub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUJnMkhlaWdodCA9ICQoJy5tdXN0LWhhdmVfX2JnJykuZXEoMSkuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIG1vc3RXYW50ZWRUb3AgPSAkKCcubW9zdC13YW50ZWQnKS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgIG1vc3RXYW50ZWRIZWlnaHQgPSAkKCcubW9zdC13YW50ZWQnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2FsZVRvcCA9ICQoJy5zYWxlJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBzYWxlSGVpZ2h0ID0gJCgnLnNhbGUnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVG9wID0gJCgnLnNpdGVfX2hlYWRlcicpLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0ID0gJCgnLnNpdGVfX2hlYWRlcicpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cblxuICAgICAgICAgICAgICAgIF9ib2R5Lm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOntcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlU2Nyb2xsaW5nOmZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbFBvc2l0aW9uID0gcGFyc2VJbnQodGhpcy5tY3MudG9wKigtMSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHNjcm9sbFBvc2l0aW9uIDw9ICggY29sbGVjdGlvblRvcCArIGNvbGxlY3Rpb25IZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBjb2xsZWN0aW9uVG9wICkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5jb2xsZWN0aW9uIC5zaXRlX190aXRsZScpLCAwLCBzY3JvbGxQb3NpdGlvbiwgY29sbGVjdGlvbkhlaWdodCowLjMvKGNvbGxlY3Rpb25IZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5jb2xsZWN0aW9uX19waWMnKSwgMCwgc2Nyb2xsUG9zaXRpb24sIGNvbGxlY3Rpb25IZWlnaHQqMC4xNS8oY29sbGVjdGlvbkhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLmNvbGxlY3Rpb25fX3dyYXAnKSwgc2Nyb2xsUG9zaXRpb24sIDAsIGNvbGxlY3Rpb25IZWlnaHQqMC4wNS8oY29sbGVjdGlvbkhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbXVzdC1oYXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHNjcm9sbFBvc2l0aW9uIDw9ICggbXVzdEhhdmVUb3AgKyBtdXN0SGF2ZUhlaWdodCApICYmICggKCB3aW5IZWlnaHQgKyBzY3JvbGxQb3NpdGlvbiApID49IG11c3RIYXZlVG9wICkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5tdXN0LWhhdmUgLnNpdGVfX3RpdGxlJyksIDAsIHNjcm9sbFBvc2l0aW9uIC0gKG11c3RIYXZlVG9wIC0gd2luSGVpZ2h0KSwgbXVzdEhhdmVIZWlnaHQqMC4zLyhtdXN0SGF2ZUhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbXVzdC1oYXZlLWJnMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKCBzY3JvbGxQb3NpdGlvbiA8PSAoIG11c3RIYXZlQmcxVG9wICsgbXVzdEhhdmVCZzFIZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBtdXN0SGF2ZUJnMVRvcCApICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcubXVzdC1oYXZlX19iZycpLmVxKDApLCAwLCBzY3JvbGxQb3NpdGlvbiAtIChtdXN0SGF2ZUJnMVRvcCAtIHdpbkhlaWdodCksIG11c3RIYXZlQmcxSGVpZ2h0KigtMC4yKS8obXVzdEhhdmVCZzFIZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL211c3QtaGF2ZS1iZzJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggc2Nyb2xsUG9zaXRpb24gPD0gKCBtdXN0SGF2ZUJnMlRvcCArIG11c3RIYXZlQmcySGVpZ2h0ICkgJiYgKCAoIHdpbkhlaWdodCArIHNjcm9sbFBvc2l0aW9uICkgPj0gbXVzdEhhdmVCZzJUb3AgKSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLm11c3QtaGF2ZV9fYmcnKS5lcSgxKSwgMCwgc2Nyb2xsUG9zaXRpb24gLSAobXVzdEhhdmVUb3AgLSB3aW5IZWlnaHQpLCBtdXN0SGF2ZUJnMkhlaWdodCowLjIvKG11c3RIYXZlQmcySGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tb3N0LXdhbnRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKCBzY3JvbGxQb3NpdGlvbiA8PSAoIG1vc3RXYW50ZWRUb3AgKyBtb3N0V2FudGVkSGVpZ2h0ICkgJiYgKCAoIHdpbkhlaWdodCArIHNjcm9sbFBvc2l0aW9uICkgPj0gbW9zdFdhbnRlZFRvcCApICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcubW9zdC13YW50ZWQgLnNpdGVfX3RpdGxlJyksIDAsIHNjcm9sbFBvc2l0aW9uIC0gKG1vc3RXYW50ZWRUb3AgLSB3aW5IZWlnaHQpLCBtb3N0V2FudGVkSGVpZ2h0KjAuMy8obW9zdFdhbnRlZEhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2FsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKCBzY3JvbGxQb3NpdGlvbiA8PSAoIHNhbGVUb3AgKyBzYWxlSGVpZ2h0ICkgJiYgKCAoIHdpbkhlaWdodCArIHNjcm9sbFBvc2l0aW9uICkgPj0gc2FsZVRvcCApICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcuc2FsZSAuc2l0ZV9fdGl0bGUnKSwgMCwgc2Nyb2xsUG9zaXRpb24gLSAoc2FsZVRvcCAtIHdpbkhlaWdodCksIHNhbGVIZWlnaHQqMC4zLyhzYWxlSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcuc2FsZV9fYmcnKSwgMCwgc2Nyb2xsUG9zaXRpb24gLSAoc2FsZVRvcCAtIHdpbkhlaWdodCksIHNhbGVIZWlnaHQqMC40LyhzYWxlSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9oZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggc2Nyb2xsUG9zaXRpb24gPD0gKCBoZWFkZXJUb3AgKyBoZWFkZXJIZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBoZWFkZXJUb3AgKSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLnNpdGVfX2hlYWRlci1iZycpLCAwLCBzY3JvbGxQb3NpdGlvbiwgaGVhZGVySGVpZ2h0KjAuNS8oaGVhZGVySGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY3JlYXRlVGl0bGUgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGVsZW0udGV4dCgpLnJlcGxhY2UoL1xccy9nLCBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyID0gbGluZS5zcGxpdCgnJyksXG4gICAgICAgICAgICAgICAgICAgIGFyckxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBlbGVtLnRleHQoJycpO1xuXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5hcHBlbmQoJzxzcGFuPicgKyBhcnJbaV0gKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcGFyYWxheCA9IGZ1bmN0aW9uKCBlbGVtLCB4LCB5LCBrb2VmICkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSAndHJhbnNsYXRlM2QoJyArIE1hdGgucm91bmQoeCprb2VmKSArICdweCwgJyArIE1hdGgucm91bmQoeSprb2VmKSArICdweCwgMHB4ICknO1xuXG4gICAgICAgICAgICAgICAgZWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6IHRyYW5zbGF0ZVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfYWRkQ3VzdG9tU2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICBfc2l0ZVRpdGxlLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfY3JlYXRlVGl0bGUoICQodGhpcykgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
