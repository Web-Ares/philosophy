"use strict";$(function(){$(function(){new n,$(".menu").each(function(){new e($(this))}),$(".news").each(function(){new t($(this))})});var t=function(t){var e=t,n=e.find(".news__item"),i=function(){n.each(function(){var t=$(this),e=t.find("img"),n=t.find(".news__item-wrap");n.prepend(e.clone())})},o=function(){i()};o()},e=function(t){var e=t,n=$(".menu-btn"),i=$(".site"),o=e.find(".menu__wrap"),s="blur",a=function(){e.on({click:function(){e.removeClass("open"),i.removeClass(s)}}),n.on({click:function(){e.addClass("open"),i.addClass(s)}}),o.on({click:function(t){var t=t||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}})},c=function(){var t=window.navigator.userAgent.toLowerCase(),e=/trident/gi.test(t)||/msie/gi.test(t)||/edge/gi.test(t);e&&(s="light")},f=function(){a(),c(),o.mCustomScrollbar()};f()},n=function(t){var e=$(".site__title"),n=$(".spinner"),i=$("body"),o=function(){$(window).on({load:function(){setTimeout(function(){n.addClass("hide"),setTimeout(function(){n.remove()},500)},1e3)},resize:function(){s()}})},s=function(){var t=$(".collection").offset().top,e=$(".collection").height(),n=$(".must-have").offset().top,o=$(".must-have").height(),s=$(".must-have__bg").eq(0).offset().top,a=$(".must-have__bg").eq(0).height(),f=$(".must-have__bg").eq(1).offset().top,u=$(".must-have__bg").eq(1).height(),l=$(".most-wanted").offset().top,r=$(".most-wanted").height(),h=$(".sale").offset().top,_=$(".sale").height(),m=$(".site__header").offset().top,p=$(".site__header").height(),g=$(window).height();i.mCustomScrollbar({callbacks:{whileScrolling:function(){var i=parseInt(-1*this.mcs.top);t+e>=i&&g+i>=t&&(c($(".collection .site__title"),0,i,.3*e/(e+g)),c($(".collection__pic"),0,i,.15*e/(e+g)),c($(".collection__wrap"),i,0,.05*e/(e+g))),n+o>=i&&g+i>=n&&c($(".must-have .site__title"),0,i-(n-g),.3*o/(o+g)),s+a>=i&&g+i>=s&&c($(".must-have__bg").eq(0),0,i-(s-g),a*-.1/(a+g)),f+u>=i&&g+i>=f&&c($(".must-have__bg").eq(1),0,i-(n-g),.1*u/(u+g)),l+r>=i&&g+i>=l&&c($(".most-wanted .site__title"),0,i-(l-g),.3*r/(r+g)),h+_>=i&&g+i>=h&&(c($(".sale .site__title"),0,i-(h-g),.3*_/(_+g)),c($(".sale__bg"),0,i-(h-g),.2*_/(_+g))),m+p>=i&&g+i>=m&&c($(".site__header-bg"),0,i,.5*p/(p+g))}}})},a=function(t){var e=t.text().replace(/\s/g,""),n=e.split(""),i=n.length;t.text("");for(var o=0;i>o;o++)t.append("<span>"+n[o]+"</span>")},c=function(t,e,n,i){t.css({transform:"translate("+e*i+"px, "+n*i+"px )"})},f=function(){o(),s(),e.each(function(){a($(this))})};f()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiUGFnZSIsImVhY2giLCJNZW51IiwidGhpcyIsIk5ld3MiLCJvYmoiLCJfb2JqIiwiX2l0ZW0iLCJmaW5kIiwiX2NyZWF0ZSIsImN1ckVsZW0iLCJjdXJQaWMiLCJ3cmFwRWxlbSIsInByZXBlbmQiLCJjbG9uZSIsIl9pbml0IiwiX2J0biIsIl9zaXRlIiwiX3dyYXAiLCJfY2xhc3NOYW1lIiwiX2FkZEV2ZW50cyIsIm9uIiwiY2xpY2siLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZXZlbnQiLCJ3aW5kb3ciLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJfZGV0ZWN0QnJvd3NlciIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc19pZSIsInRlc3QiLCJtQ3VzdG9tU2Nyb2xsYmFyIiwiX3NpdGVUaXRsZSIsIl9zcGlubmVyIiwiX2JvZHkiLCJsb2FkIiwic2V0VGltZW91dCIsInJlbW92ZSIsInJlc2l6ZSIsIl9hZGRDdXN0b21TY3JvbGwiLCJjb2xsZWN0aW9uVG9wIiwib2Zmc2V0IiwidG9wIiwiY29sbGVjdGlvbkhlaWdodCIsImhlaWdodCIsIm11c3RIYXZlVG9wIiwibXVzdEhhdmVIZWlnaHQiLCJtdXN0SGF2ZUJnMVRvcCIsImVxIiwibXVzdEhhdmVCZzFIZWlnaHQiLCJtdXN0SGF2ZUJnMlRvcCIsIm11c3RIYXZlQmcySGVpZ2h0IiwibW9zdFdhbnRlZFRvcCIsIm1vc3RXYW50ZWRIZWlnaHQiLCJzYWxlVG9wIiwic2FsZUhlaWdodCIsImhlYWRlclRvcCIsImhlYWRlckhlaWdodCIsIndpbkhlaWdodCIsImNhbGxiYWNrcyIsIndoaWxlU2Nyb2xsaW5nIiwic2Nyb2xsUG9zaXRpb24iLCJwYXJzZUludCIsIm1jcyIsIl9wYXJhbGF4IiwiX2NyZWF0ZVRpdGxlIiwiZWxlbSIsImxpbmUiLCJ0ZXh0IiwicmVwbGFjZSIsImFyciIsInNwbGl0IiwiYXJyTGVuZ3RoIiwibGVuZ3RoIiwiaSIsImFwcGVuZCIsIngiLCJ5Iiwia29lZiIsImNzcyIsInRyYW5zZm9ybSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQUEsR0FBRSxXQUdFQSxFQUFFLFdBRUUsR0FBSUMsR0FFSkQsRUFBRSxTQUFTRSxLQUFNLFdBQ2IsR0FBSUMsR0FBTUgsRUFBRUksU0FHaEJKLEVBQUUsU0FBU0UsS0FBTSxXQUNiLEdBQUlHLEdBQU1MLEVBQUVJLFVBS3BCLElBQUlDLEdBQU8sU0FBU0MsR0FHaEIsR0FBSUMsR0FBT0QsRUFDUEUsRUFBUUQsRUFBS0UsS0FBTSxlQUduQkMsRUFBVSxXQUVORixFQUFNTixLQUFNLFdBQ1IsR0FBSVMsR0FBVVgsRUFBR0ksTUFDYlEsRUFBU0QsRUFBUUYsS0FBTSxPQUN2QkksRUFBV0YsRUFBUUYsS0FBTSxtQkFJN0JJLEdBQVNDLFFBQVFGLEVBQU9HLFlBSWhDQyxFQUFRLFdBQ0pOLElBT1JNLE1BR0FiLEVBQU8sU0FBVUcsR0FHakIsR0FBSUMsR0FBT0QsRUFDUFcsRUFBT2pCLEVBQUcsYUFDVmtCLEVBQVFsQixFQUFHLFNBQ1htQixFQUFRWixFQUFLRSxLQUFNLGVBQ25CVyxFQUFhLE9BR2JDLEVBQWEsV0FDVGQsRUFBS2UsSUFDREMsTUFBTyxXQUNIaEIsRUFBS2lCLFlBQWEsUUFDbEJOLEVBQU1NLFlBQWFKLE1BSTNCSCxFQUFLSyxJQUNEQyxNQUFPLFdBQ0hoQixFQUFLa0IsU0FBVSxRQUNmUCxFQUFNTyxTQUFVTCxNQUl4QkQsRUFBTUcsSUFDRkMsTUFBTyxTQUFVRyxHQUNiLEdBQUlBLEdBQVFBLEdBQVNDLE9BQU9ELEtBRXZCQSxHQUFNRSxnQkFDUEYsRUFBTUUsa0JBRU5GLEVBQU1HLGNBQWUsTUFNckNDLEVBQWlCLFdBQ2IsR0FBSUMsR0FBS0osT0FBT0ssVUFBVUMsVUFBVUMsY0FDaENDLEVBQVMsWUFBYUMsS0FBS0wsSUFBUSxTQUFVSyxLQUFLTCxJQUFRLFNBQVVLLEtBQUtMLEVBRXpFSSxLQUNBZixFQUFhLFVBR3JCSixFQUFRLFdBQ0pLLElBQ0FTLElBQ0FYLEVBQU1rQixtQkFHZHJCLE1BR0FmLEVBQU8sU0FBU0ssR0FHaEIsR0FDSWdDLEdBQWF0QyxFQUFHLGdCQUNoQnVDLEVBQVd2QyxFQUFHLFlBQ2R3QyxFQUFReEMsRUFBRyxRQUdYcUIsRUFBYSxXQUNUckIsRUFBRTJCLFFBQVFMLElBQ05tQixLQUFRLFdBQ0pDLFdBQVksV0FDUkgsRUFBU2QsU0FBVSxRQUNuQmlCLFdBQVcsV0FDUEgsRUFBU0ksVUFDWCxNQUNILE1BRVBDLE9BQVUsV0FDTkMsUUFJWkEsRUFBbUIsV0FDZixHQUFJQyxHQUFnQjlDLEVBQUUsZUFBZStDLFNBQVNDLElBQzFDQyxFQUFtQmpELEVBQUUsZUFBZWtELFNBQ3BDQyxFQUFjbkQsRUFBRSxjQUFjK0MsU0FBU0MsSUFDdkNJLEVBQWlCcEQsRUFBRSxjQUFja0QsU0FDakNHLEVBQWlCckQsRUFBRSxrQkFBa0JzRCxHQUFHLEdBQUdQLFNBQVNDLElBQ3BETyxFQUFvQnZELEVBQUUsa0JBQWtCc0QsR0FBRyxHQUFHSixTQUM5Q00sRUFBaUJ4RCxFQUFFLGtCQUFrQnNELEdBQUcsR0FBR1AsU0FBU0MsSUFDcERTLEVBQW9CekQsRUFBRSxrQkFBa0JzRCxHQUFHLEdBQUdKLFNBQzlDUSxFQUFnQjFELEVBQUUsZ0JBQWdCK0MsU0FBU0MsSUFDM0NXLEVBQW1CM0QsRUFBRSxnQkFBZ0JrRCxTQUNyQ1UsRUFBVTVELEVBQUUsU0FBUytDLFNBQVNDLElBQzlCYSxFQUFhN0QsRUFBRSxTQUFTa0QsU0FDeEJZLEVBQVk5RCxFQUFFLGlCQUFpQitDLFNBQVNDLElBQ3hDZSxFQUFlL0QsRUFBRSxpQkFBaUJrRCxTQUNsQ2MsRUFBWWhFLEVBQUUyQixRQUFRdUIsUUFHMUJWLEdBQU1ILGtCQUNGNEIsV0FDSUMsZUFBZSxXQUNYLEdBQUlDLEdBQWlCQyxTQUF1QixHQUFkaEUsS0FBS2lFLElBQUlyQixJQUdaRixHQUFnQkcsR0FBcENrQixHQUE4REgsRUFBWUcsR0FBb0JyQixJQUNqR3dCLEVBQVV0RSxFQUFFLDRCQUE2QixFQUFHbUUsRUFBaUMsR0FBakJsQixHQUFzQkEsRUFBbUJlLElBQ3JHTSxFQUFVdEUsRUFBRSxvQkFBcUIsRUFBR21FLEVBQWlDLElBQWpCbEIsR0FBdUJBLEVBQW1CZSxJQUM5Rk0sRUFBVXRFLEVBQUUscUJBQXNCbUUsRUFBZ0IsRUFBb0IsSUFBakJsQixHQUF1QkEsRUFBbUJlLEtBSXhFYixFQUFjQyxHQUFsQ2UsR0FBMERILEVBQVlHLEdBQW9CaEIsR0FDN0ZtQixFQUFVdEUsRUFBRSwyQkFBNEIsRUFBR21FLEdBQWtCaEIsRUFBY2EsR0FBMkIsR0FBZlosR0FBb0JBLEVBQWlCWSxJQUlyR1gsRUFBaUJFLEdBQXJDWSxHQUFnRUgsRUFBWUcsR0FBb0JkLEdBQ25HaUIsRUFBVXRFLEVBQUUsa0JBQWtCc0QsR0FBRyxHQUFJLEVBQUdhLEdBQWtCZCxFQUFpQlcsR0FBWVQsR0FBb0IsSUFBTUEsRUFBb0JTLElBSTlHUixFQUFpQkMsR0FBckNVLEdBQWdFSCxFQUFZRyxHQUFvQlgsR0FDbkdjLEVBQVV0RSxFQUFFLGtCQUFrQnNELEdBQUcsR0FBSSxFQUFHYSxHQUFrQmhCLEVBQWNhLEdBQThCLEdBQWxCUCxHQUF1QkEsRUFBb0JPLElBSXhHTixFQUFnQkMsR0FBcENRLEdBQThESCxFQUFZRyxHQUFvQlQsR0FDakdZLEVBQVV0RSxFQUFFLDZCQUE4QixFQUFHbUUsR0FBa0JULEVBQWdCTSxHQUE2QixHQUFqQkwsR0FBc0JBLEVBQW1CSyxJQUk3R0osRUFBVUMsR0FBOUJNLEdBQWtESCxFQUFZRyxHQUFvQlAsSUFDckZVLEVBQVV0RSxFQUFFLHNCQUF1QixFQUFHbUUsR0FBa0JQLEVBQVVJLEdBQXVCLEdBQVhILEdBQWdCQSxFQUFhRyxJQUMzR00sRUFBVXRFLEVBQUUsYUFBYyxFQUFHbUUsR0FBa0JQLEVBQVVJLEdBQXVCLEdBQVhILEdBQWdCQSxFQUFhRyxLQUkzRUYsRUFBWUMsR0FBaENJLEdBQXNESCxFQUFZRyxHQUFvQkwsR0FDekZRLEVBQVV0RSxFQUFFLG9CQUFxQixFQUFHbUUsRUFBNkIsR0FBYkosR0FBa0JBLEVBQWVDLFNBT3pHTyxFQUFlLFNBQVVDLEdBQ3JCLEdBQUlDLEdBQU9ELEVBQUtFLE9BQU9DLFFBQVEsTUFBTyxJQUNsQ0MsRUFBTUgsRUFBS0ksTUFBTSxJQUNqQkMsRUFBWUYsRUFBSUcsTUFFcEJQLEdBQUtFLEtBQUssR0FFVixLQUFNLEdBQUlNLEdBQUksRUFBT0YsRUFBSkUsRUFBZUEsSUFDNUJSLEVBQUtTLE9BQU8sU0FBV0wsRUFBSUksR0FBSyxZQUd4Q1YsRUFBVyxTQUFVRSxFQUFNVSxFQUFHQyxFQUFHQyxHQUM3QlosRUFBS2EsS0FDREMsVUFBYSxhQUFlSixFQUFFRSxFQUFPLE9BQVNELEVBQUVDLEVBQVEsVUFHaEVwRSxFQUFRLFdBQ0pLLElBQ0F3QixJQUVBUCxFQUFXcEMsS0FBTSxXQUNicUUsRUFBY3ZFLEVBQUVJLFNBUTVCWSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbigpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgICQoZnVuY3Rpb24oKXtcblxuICAgICAgICBuZXcgUGFnZSgpO1xuXG4gICAgICAgICQoJy5tZW51JykuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCgnLm5ld3MnKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5ldyBOZXdzKCAkKHRoaXMpICk7XG4gICAgICAgIH0gKTtcblxuICAgIH0pO1xuXG4gICAgdmFyIE5ld3MgPSBmdW5jdGlvbihvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9pdGVtID0gX29iai5maW5kKCAnLm5ld3NfX2l0ZW0nICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jcmVhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9pdGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyRWxlbSA9ICQoIHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyUGljID0gY3VyRWxlbS5maW5kKCAnaW1nJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwRWxlbSA9IGN1ckVsZW0uZmluZCggJy5uZXdzX19pdGVtLXdyYXAnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jdXJFbGVtLnByZXBlbmQoZmFjZUVsZW0pO1xuICAgICAgICAgICAgICAgICAgICAvL2N1ckVsZW0ucHJlcGVuZChjdXJQaWMuY2xvbmUoKSk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBFbGVtLnByZXBlbmQoY3VyUGljLmNsb25lKCkpO1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX2NyZWF0ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9idG4gPSAkKCAnLm1lbnUtYnRuJyApLFxuICAgICAgICAgICAgX3NpdGUgPSAkKCAnLnNpdGUnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5tZW51X193cmFwJyksXG4gICAgICAgICAgICBfY2xhc3NOYW1lID0gJ2JsdXInO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW4nICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2l0ZS5yZW1vdmVDbGFzcyggX2NsYXNzTmFtZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX2J0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLmFkZENsYXNzKCBfY2xhc3NOYW1lICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfd3JhcC5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2RldGVjdEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICAgICAgaXNfaWUgPSAoL3RyaWRlbnQvZ2kpLnRlc3QodWEpIHx8ICgvbXNpZS9naSkudGVzdCh1YSkgfHwgKC9lZGdlL2dpKS50ZXN0KHVhKTtcblxuICAgICAgICAgICAgICAgIGlmIChpc19pZSkge1xuICAgICAgICAgICAgICAgICAgICBfY2xhc3NOYW1lID0gJ2xpZ2h0JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9kZXRlY3RCcm93c2VyKCk7XG4gICAgICAgICAgICAgICAgX3dyYXAubUN1c3RvbVNjcm9sbGJhcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUGFnZSA9IGZ1bmN0aW9uKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfc2l0ZVRpdGxlID0gJCggJy5zaXRlX190aXRsZScpLFxuICAgICAgICAgICAgX3NwaW5uZXIgPSAkKCAnLnNwaW5uZXInKSxcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ2xvYWQnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zcGlubmVyLmFkZENsYXNzKCAnaGlkZScgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zcGlubmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc2l6ZSc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZEN1c3RvbVNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRDdXN0b21TY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvblRvcCA9ICQoJy5jb2xsZWN0aW9uJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSGVpZ2h0ID0gJCgnLmNvbGxlY3Rpb24nKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVUb3AgPSAkKCcubXVzdC1oYXZlJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUhlaWdodCA9ICQoJy5tdXN0LWhhdmUnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVCZzFUb3AgPSAkKCcubXVzdC1oYXZlX19iZycpLmVxKDApLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbXVzdEhhdmVCZzFIZWlnaHQgPSAkKCcubXVzdC1oYXZlX19iZycpLmVxKDApLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUJnMlRvcCA9ICQoJy5tdXN0LWhhdmVfX2JnJykuZXEoMSkub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBtdXN0SGF2ZUJnMkhlaWdodCA9ICQoJy5tdXN0LWhhdmVfX2JnJykuZXEoMSkuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgICAgIG1vc3RXYW50ZWRUb3AgPSAkKCcubW9zdC13YW50ZWQnKS5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgICAgIG1vc3RXYW50ZWRIZWlnaHQgPSAkKCcubW9zdC13YW50ZWQnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgc2FsZVRvcCA9ICQoJy5zYWxlJykub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgICAgICBzYWxlSGVpZ2h0ID0gJCgnLnNhbGUnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVG9wID0gJCgnLnNpdGVfX2hlYWRlcicpLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVySGVpZ2h0ID0gJCgnLnNpdGVfX2hlYWRlcicpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgICAgICB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cblxuICAgICAgICAgICAgICAgIF9ib2R5Lm1DdXN0b21TY3JvbGxiYXIoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6e1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGVTY3JvbGxpbmc6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBwYXJzZUludCh0aGlzLm1jcy50b3AqKC0xKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggc2Nyb2xsUG9zaXRpb24gPD0gKCBjb2xsZWN0aW9uVG9wICsgY29sbGVjdGlvbkhlaWdodCApICYmICggKCB3aW5IZWlnaHQgKyBzY3JvbGxQb3NpdGlvbiApID49IGNvbGxlY3Rpb25Ub3AgKSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLmNvbGxlY3Rpb24gLnNpdGVfX3RpdGxlJyksIDAsIHNjcm9sbFBvc2l0aW9uLCBjb2xsZWN0aW9uSGVpZ2h0KjAuMy8oY29sbGVjdGlvbkhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLmNvbGxlY3Rpb25fX3BpYycpLCAwLCBzY3JvbGxQb3NpdGlvbiwgY29sbGVjdGlvbkhlaWdodCowLjE1Lyhjb2xsZWN0aW9uSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcuY29sbGVjdGlvbl9fd3JhcCcpLCBzY3JvbGxQb3NpdGlvbiwgMCwgY29sbGVjdGlvbkhlaWdodCowLjA1Lyhjb2xsZWN0aW9uSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tdXN0LWhhdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggc2Nyb2xsUG9zaXRpb24gPD0gKCBtdXN0SGF2ZVRvcCArIG11c3RIYXZlSGVpZ2h0ICkgJiYgKCAoIHdpbkhlaWdodCArIHNjcm9sbFBvc2l0aW9uICkgPj0gbXVzdEhhdmVUb3AgKSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcGFyYWxheCggJCgnLm11c3QtaGF2ZSAuc2l0ZV9fdGl0bGUnKSwgMCwgc2Nyb2xsUG9zaXRpb24gLSAobXVzdEhhdmVUb3AgLSB3aW5IZWlnaHQpLCBtdXN0SGF2ZUhlaWdodCowLjMvKG11c3RIYXZlSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tdXN0LWhhdmUtYmcxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHNjcm9sbFBvc2l0aW9uIDw9ICggbXVzdEhhdmVCZzFUb3AgKyBtdXN0SGF2ZUJnMUhlaWdodCApICYmICggKCB3aW5IZWlnaHQgKyBzY3JvbGxQb3NpdGlvbiApID49IG11c3RIYXZlQmcxVG9wICkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5tdXN0LWhhdmVfX2JnJykuZXEoMCksIDAsIHNjcm9sbFBvc2l0aW9uIC0gKG11c3RIYXZlQmcxVG9wIC0gd2luSGVpZ2h0KSwgbXVzdEhhdmVCZzFIZWlnaHQqKC0wLjEpLyhtdXN0SGF2ZUJnMUhlaWdodCArIHdpbkhlaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbXVzdC1oYXZlLWJnMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKCBzY3JvbGxQb3NpdGlvbiA8PSAoIG11c3RIYXZlQmcyVG9wICsgbXVzdEhhdmVCZzJIZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBtdXN0SGF2ZUJnMlRvcCApICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcubXVzdC1oYXZlX19iZycpLmVxKDEpLCAwLCBzY3JvbGxQb3NpdGlvbiAtIChtdXN0SGF2ZVRvcCAtIHdpbkhlaWdodCksIG11c3RIYXZlQmcySGVpZ2h0KjAuMS8obXVzdEhhdmVCZzJIZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21vc3Qtd2FudGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHNjcm9sbFBvc2l0aW9uIDw9ICggbW9zdFdhbnRlZFRvcCArIG1vc3RXYW50ZWRIZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBtb3N0V2FudGVkVG9wICkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5tb3N0LXdhbnRlZCAuc2l0ZV9fdGl0bGUnKSwgMCwgc2Nyb2xsUG9zaXRpb24gLSAobW9zdFdhbnRlZFRvcCAtIHdpbkhlaWdodCksIG1vc3RXYW50ZWRIZWlnaHQqMC4zLyhtb3N0V2FudGVkSGVpZ2h0ICsgd2luSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zYWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIHNjcm9sbFBvc2l0aW9uIDw9ICggc2FsZVRvcCArIHNhbGVIZWlnaHQgKSAmJiAoICggd2luSGVpZ2h0ICsgc2Nyb2xsUG9zaXRpb24gKSA+PSBzYWxlVG9wICkgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5zYWxlIC5zaXRlX190aXRsZScpLCAwLCBzY3JvbGxQb3NpdGlvbiAtIChzYWxlVG9wIC0gd2luSGVpZ2h0KSwgc2FsZUhlaWdodCowLjMvKHNhbGVIZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoICQoJy5zYWxlX19iZycpLCAwLCBzY3JvbGxQb3NpdGlvbiAtIChzYWxlVG9wIC0gd2luSGVpZ2h0KSwgc2FsZUhlaWdodCowLjIvKHNhbGVIZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2hlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKCBzY3JvbGxQb3NpdGlvbiA8PSAoIGhlYWRlclRvcCArIGhlYWRlckhlaWdodCApICYmICggKCB3aW5IZWlnaHQgKyBzY3JvbGxQb3NpdGlvbiApID49IGhlYWRlclRvcCApICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCAkKCcuc2l0ZV9faGVhZGVyLWJnJyksIDAsIHNjcm9sbFBvc2l0aW9uLCBoZWFkZXJIZWlnaHQqMC41LyhoZWFkZXJIZWlnaHQgKyB3aW5IZWlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jcmVhdGVUaXRsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgIHZhciBsaW5lID0gZWxlbS50ZXh0KCkucmVwbGFjZSgvXFxzL2csIFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICBhcnIgPSBsaW5lLnNwbGl0KCcnKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGVsZW0udGV4dCgnJyk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmFwcGVuZCgnPHNwYW4+JyArIGFycltpXSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9wYXJhbGF4ID0gZnVuY3Rpb24oIGVsZW0sIHgsIHksIGtvZWYgKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoJyArIHgqa29lZiArICdweCwgJyArIHkqa29lZiArICAncHggKSdcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2FkZEN1c3RvbVNjcm9sbCgpO1xuXG4gICAgICAgICAgICAgICAgX3NpdGVUaXRsZS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX2NyZWF0ZVRpdGxlKCAkKHRoaXMpICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
